#include <stdio.h>
#include "constants.h"
#include "lcd.h"
#include "graphism.h"
#include "characters_c64.h"

const uint8_t CHAR_HEIGHT = 8;
const uint8_t CHAR_WIDTH = 8;
char SCREEN[ROWS][COLUMNS] = {0};
int cursorX = 0;
int cursorY = 0;

const uint16_t char_characters[4096] = {
    60, 102, 110, 110, 96, 98, 60, 0,
    24, 60, 102, 126, 102, 102, 102, 0,
    124, 102, 102, 124, 102, 102, 124, 0,
    60, 102, 96, 96, 96, 102, 60, 0,
    120, 108, 102, 102, 102, 108, 120, 0,
    126, 96, 96, 120, 96, 96, 126, 0,
    126, 96, 96, 120, 96, 96, 96, 0,
    60, 102, 96, 110, 102, 102, 60, 0,
    102, 102, 102, 126, 102, 102, 102, 0,
    60, 24, 24, 24, 24, 24, 60, 0,
    30, 12, 12, 12, 12, 108, 56, 0,
    102, 108, 120, 112, 120, 108, 102, 0,
    96, 96, 96, 96, 96, 96, 126, 0,
    99, 119, 127, 107, 99, 99, 99, 0,
    102, 118, 126, 126, 110, 102, 102, 0,
    60, 102, 102, 102, 102, 102, 60, 0,
    124, 102, 102, 124, 96, 96, 96, 0,
    60, 102, 102, 102, 102, 60, 14, 0,
    124, 102, 102, 124, 120, 108, 102, 0,
    60, 102, 96, 60, 6, 102, 60, 0,
    126, 24, 24, 24, 24, 24, 24, 0,
    102, 102, 102, 102, 102, 102, 60, 0,
    102, 102, 102, 102, 102, 60, 24, 0,
    99, 99, 99, 107, 127, 119, 99, 0,
    102, 102, 60, 24, 60, 102, 102, 0,
    102, 102, 102, 60, 24, 24, 24, 0,
    126, 6, 12, 24, 48, 96, 126, 0,
    60, 48, 48, 48, 48, 48, 60, 0,
    12, 18, 48, 124, 48, 98, 252, 0,
    60, 12, 12, 12, 12, 12, 60, 0,
    0, 24, 60, 126, 24, 24, 24, 24,
    0, 16, 48, 127, 127, 48, 16, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    24, 24, 24, 24, 0, 0, 24, 0,
    102, 102, 102, 0, 0, 0, 0, 0,
    102, 102, 255, 102, 255, 102, 102, 0,
    24, 62, 96, 60, 6, 124, 24, 0,
    98, 102, 12, 24, 48, 102, 70, 0,
    60, 102, 60, 56, 103, 102, 63, 0,
    6, 12, 24, 0, 0, 0, 0, 0,
    12, 24, 48, 48, 48, 24, 12, 0,
    48, 24, 12, 12, 12, 24, 48, 0,
    0, 102, 60, 255, 60, 102, 0, 0,
    0, 24, 24, 126, 24, 24, 0, 0,
    0, 0, 0, 0, 0, 24, 24, 48,
    0, 0, 0, 126, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 24, 24, 0,
    0, 3, 6, 12, 24, 48, 96, 0,
    60, 102, 110, 118, 102, 102, 60, 0,
    24, 24, 56, 24, 24, 24, 126, 0,
    60, 102, 6, 12, 48, 96, 126, 0,
    60, 102, 6, 28, 6, 102, 60, 0,
    6, 14, 30, 102, 127, 6, 6, 0,
    126, 96, 124, 6, 6, 102, 60, 0,
    60, 102, 96, 124, 102, 102, 60, 0,
    126, 102, 12, 24, 24, 24, 24, 0,
    60, 102, 102, 60, 102, 102, 60, 0,
    60, 102, 102, 62, 6, 102, 60, 0,
    0, 0, 24, 0, 0, 24, 0, 0,
    0, 0, 24, 0, 0, 24, 24, 48,
    14, 24, 48, 96, 48, 24, 14, 0,
    0, 0, 126, 0, 126, 0, 0, 0,
    112, 24, 12, 6, 12, 24, 112, 0,
    60, 102, 6, 12, 24, 0, 24, 0,
    0, 0, 0, 255, 255, 0, 0, 0,
    8, 28, 62, 127, 127, 28, 62, 0,
    24, 24, 24, 24, 24, 24, 24, 24,
    0, 0, 0, 255, 255, 0, 0, 0,
    0, 0, 255, 255, 0, 0, 0, 0,
    0, 255, 255, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 255, 255, 0, 0,
    48, 48, 48, 48, 48, 48, 48, 48,
    12, 12, 12, 12, 12, 12, 12, 12,
    0, 0, 0, 224, 240, 56, 24, 24,
    24, 24, 28, 15, 7, 0, 0, 0,
    24, 24, 56, 240, 224, 0, 0, 0,
    192, 192, 192, 192, 192, 192, 255, 255,
    192, 224, 112, 56, 28, 14, 7, 3,
    3, 7, 14, 28, 56, 112, 224, 192,
    255, 255, 192, 192, 192, 192, 192, 192,
    255, 255, 3, 3, 3, 3, 3, 3,
    0, 60, 126, 126, 126, 126, 60, 0,
    0, 0, 0, 0, 0, 255, 255, 0,
    54, 127, 127, 127, 62, 28, 8, 0,
    96, 96, 96, 96, 96, 96, 96, 96,
    0, 0, 0, 7, 15, 28, 24, 24,
    195, 231, 126, 60, 60, 126, 231, 195,
    0, 60, 126, 102, 102, 126, 60, 0,
    24, 24, 102, 102, 24, 24, 60, 0,
    6, 6, 6, 6, 6, 6, 6, 6,
    8, 28, 62, 127, 62, 28, 8, 0,
    24, 24, 24, 255, 255, 24, 24, 24,
    192, 192, 48, 48, 192, 192, 48, 48,
    24, 24, 24, 24, 24, 24, 24, 24,
    0, 0, 3, 62, 118, 54, 54, 0,
    255, 127, 63, 31, 15, 7, 3, 1,
    0, 0, 0, 0, 0, 0, 0, 0,
    240, 240, 240, 240, 240, 240, 240, 240,
    0, 0, 0, 0, 255, 255, 255, 255,
    255, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 255,
    192, 192, 192, 192, 192, 192, 192, 192,
    204, 204, 51, 51, 204, 204, 51, 51,
    3, 3, 3, 3, 3, 3, 3, 3,
    0, 0, 0, 0, 204, 204, 51, 51,
    255, 254, 252, 248, 240, 224, 192, 128,
    3, 3, 3, 3, 3, 3, 3, 3,
    24, 24, 24, 31, 31, 24, 24, 24,
    0, 0, 0, 0, 15, 15, 15, 15,
    24, 24, 24, 31, 31, 0, 0, 0,
    0, 0, 0, 248, 248, 24, 24, 24,
    0, 0, 0, 0, 0, 0, 255, 255,
    0, 0, 0, 31, 31, 24, 24, 24,
    24, 24, 24, 255, 255, 0, 0, 0,
    0, 0, 0, 255, 255, 24, 24, 24,
    24, 24, 24, 248, 248, 24, 24, 24,
    192, 192, 192, 192, 192, 192, 192, 192,
    224, 224, 224, 224, 224, 224, 224, 224,
    7, 7, 7, 7, 7, 7, 7, 7,
    255, 255, 0, 0, 0, 0, 0, 0,
    255, 255, 255, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 255, 255, 255,
    3, 3, 3, 3, 3, 3, 255, 255,
    0, 0, 0, 0, 240, 240, 240, 240,
    15, 15, 15, 15, 0, 0, 0, 0,
    24, 24, 24, 248, 248, 0, 0, 0,
    240, 240, 240, 240, 0, 0, 0, 0,
    240, 240, 240, 240, 15, 15, 15, 15,
    195, 153, 145, 145, 159, 153, 195, 255,
    231, 195, 153, 129, 153, 153, 153, 255,
    131, 153, 153, 131, 153, 153, 131, 255,
    195, 153, 159, 159, 159, 153, 195, 255,
    135, 147, 153, 153, 153, 147, 135, 255,
    129, 159, 159, 135, 159, 159, 129, 255,
    129, 159, 159, 135, 159, 159, 159, 255,
    195, 153, 159, 145, 153, 153, 195, 255,
    153, 153, 153, 129, 153, 153, 153, 255,
    195, 231, 231, 231, 231, 231, 195, 255,
    225, 243, 243, 243, 243, 147, 199, 255,
    153, 147, 135, 143, 135, 147, 153, 255,
    159, 159, 159, 159, 159, 159, 129, 255,
    156, 136, 128, 148, 156, 156, 156, 255,
    153, 137, 129, 129, 145, 153, 153, 255,
    195, 153, 153, 153, 153, 153, 195, 255,
    131, 153, 153, 131, 159, 159, 159, 255,
    195, 153, 153, 153, 153, 195, 241, 255,
    131, 153, 153, 131, 135, 147, 153, 255,
    195, 153, 159, 195, 249, 153, 195, 255,
    129, 231, 231, 231, 231, 231, 231, 255,
    153, 153, 153, 153, 153, 153, 195, 255,
    153, 153, 153, 153, 153, 195, 231, 255,
    156, 156, 156, 148, 128, 136, 156, 255,
    153, 153, 195, 231, 195, 153, 153, 255,
    153, 153, 153, 195, 231, 231, 231, 255,
    129, 249, 243, 231, 207, 159, 129, 255,
    195, 207, 207, 207, 207, 207, 195, 255,
    243, 237, 207, 131, 207, 157, 3, 255,
    195, 243, 243, 243, 243, 243, 195, 255,
    255, 231, 195, 129, 231, 231, 231, 231,
    255, 239, 207, 128, 128, 207, 239, 255,
    255, 255, 255, 255, 255, 255, 255, 255,
    231, 231, 231, 231, 255, 255, 231, 255,
    153, 153, 153, 255, 255, 255, 255, 255,
    153, 153, 0, 153, 0, 153, 153, 255,
    231, 193, 159, 195, 249, 131, 231, 255,
    157, 153, 243, 231, 207, 153, 185, 255,
    195, 153, 195, 199, 152, 153, 192, 255,
    249, 243, 231, 255, 255, 255, 255, 255,
    243, 231, 207, 207, 207, 231, 243, 255,
    207, 231, 243, 243, 243, 231, 207, 255,
    255, 153, 195, 0, 195, 153, 255, 255,
    255, 231, 231, 129, 231, 231, 255, 255,
    255, 255, 255, 255, 255, 231, 231, 207,
    255, 255, 255, 129, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 231, 231, 255,
    255, 252, 249, 243, 231, 207, 159, 255,
    195, 153, 145, 137, 153, 153, 195, 255,
    231, 231, 199, 231, 231, 231, 129, 255,
    195, 153, 249, 243, 207, 159, 129, 255,
    195, 153, 249, 227, 249, 153, 195, 255,
    249, 241, 225, 153, 128, 249, 249, 255,
    129, 159, 131, 249, 249, 153, 195, 255,
    195, 153, 159, 131, 153, 153, 195, 255,
    129, 153, 243, 231, 231, 231, 231, 255,
    195, 153, 153, 195, 153, 153, 195, 255,
    195, 153, 153, 193, 249, 153, 195, 255,
    255, 255, 231, 255, 255, 231, 255, 255,
    255, 255, 231, 255, 255, 231, 231, 207,
    241, 231, 207, 159, 207, 231, 241, 255,
    255, 255, 129, 255, 129, 255, 255, 255,
    143, 231, 243, 249, 243, 231, 143, 255,
    195, 153, 249, 243, 231, 255, 231, 255,
    255, 255, 255, 0, 0, 255, 255, 255,
    247, 227, 193, 128, 128, 227, 193, 255,
    231, 231, 231, 231, 231, 231, 231, 231,
    255, 255, 255, 0, 0, 255, 255, 255,
    255, 255, 0, 0, 255, 255, 255, 255,
    255, 0, 0, 255, 255, 255, 255, 255,
    255, 255, 255, 255, 0, 0, 255, 255,
    207, 207, 207, 207, 207, 207, 207, 207,
    243, 243, 243, 243, 243, 243, 243, 243,
    255, 255, 255, 31, 15, 199, 231, 231,
    231, 231, 227, 240, 248, 255, 255, 255,
    231, 231, 199, 15, 31, 255, 255, 255,
    63, 63, 63, 63, 63, 63, 0, 0,
    63, 31, 143, 199, 227, 241, 248, 252,
    252, 248, 241, 227, 199, 143, 31, 63,
    0, 0, 63, 63, 63, 63, 63, 63,
    0, 0, 252, 252, 252, 252, 252, 252,
    255, 195, 129, 129, 129, 129, 195, 255,
    255, 255, 255, 255, 255, 0, 0, 255,
    201, 128, 128, 128, 193, 227, 247, 255,
    159, 159, 159, 159, 159, 159, 159, 159,
    255, 255, 255, 248, 240, 227, 231, 231,
    60, 24, 129, 195, 195, 129, 24, 60,
    255, 195, 129, 153, 153, 129, 195, 255,
    231, 231, 153, 153, 231, 231, 195, 255,
    249, 249, 249, 249, 249, 249, 249, 249,
    247, 227, 193, 128, 193, 227, 247, 255,
    231, 231, 231, 0, 0, 231, 231, 231,
    63, 63, 207, 207, 63, 63, 207, 207,
    231, 231, 231, 231, 231, 231, 231, 231,
    255, 255, 252, 193, 137, 201, 201, 255,
    0, 128, 192, 224, 240, 248, 252, 254,
    255, 255, 255, 255, 255, 255, 255, 255,
    15, 15, 15, 15, 15, 15, 15, 15,
    255, 255, 255, 255, 0, 0, 0, 0,
    0, 255, 255, 255, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 255, 255, 0,
    63, 63, 63, 63, 63, 63, 63, 63,
    51, 51, 204, 204, 51, 51, 204, 204,
    252, 252, 252, 252, 252, 252, 252, 252,
    255, 255, 255, 255, 51, 51, 204, 204,
    0, 1, 3, 7, 15, 31, 63, 127,
    252, 252, 252, 252, 252, 252, 252, 252,
    231, 231, 231, 224, 224, 231, 231, 231,
    255, 255, 255, 255, 240, 240, 240, 240,
    231, 231, 231, 224, 224, 255, 255, 255,
    255, 255, 255, 7, 7, 231, 231, 231,
    255, 255, 255, 255, 255, 255, 0, 0,
    255, 255, 255, 224, 224, 231, 231, 231,
    231, 231, 231, 0, 0, 255, 255, 255,
    255, 255, 255, 0, 0, 231, 231, 231,
    231, 231, 231, 7, 7, 231, 231, 231,
    63, 63, 63, 63, 63, 63, 63, 63,
    31, 31, 31, 31, 31, 31, 31, 31,
    248, 248, 248, 248, 248, 248, 248, 248,
    0, 0, 255, 255, 255, 255, 255, 255,
    0, 0, 0, 255, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 0, 0, 0,
    252, 252, 252, 252, 252, 252, 0, 0,
    255, 255, 255, 255, 15, 15, 15, 15,
    240, 240, 240, 240, 255, 255, 255, 255,
    231, 231, 231, 7, 7, 255, 255, 255,
    15, 15, 15, 15, 255, 255, 255, 255,
    15, 15, 15, 15, 240, 240, 240, 240,
    60, 102, 110, 110, 96, 98, 60, 0,
    0, 0, 60, 6, 62, 102, 62, 0,
    0, 96, 96, 124, 102, 102, 124, 0,
    0, 0, 60, 96, 96, 96, 60, 0,
    0, 6, 6, 62, 102, 102, 62, 0,
    0, 0, 60, 102, 126, 96, 60, 0,
    0, 14, 24, 62, 24, 24, 24, 0,
    0, 0, 62, 102, 102, 62, 6, 124,
    0, 96, 96, 124, 102, 102, 102, 0,
    0, 24, 0, 56, 24, 24, 60, 0,
    0, 6, 0, 6, 6, 6, 6, 60,
    0, 96, 96, 108, 120, 108, 102, 0,
    0, 56, 24, 24, 24, 24, 60, 0,
    0, 0, 102, 127, 127, 107, 99, 0,
    0, 0, 124, 102, 102, 102, 102, 0,
    0, 0, 60, 102, 102, 102, 60, 0,
    0, 0, 124, 102, 102, 124, 96, 96,
    0, 0, 62, 102, 102, 62, 6, 6,
    0, 0, 124, 102, 96, 96, 96, 0,
    0, 0, 62, 96, 60, 6, 124, 0,
    0, 24, 126, 24, 24, 24, 14, 0,
    0, 0, 102, 102, 102, 102, 62, 0,
    0, 0, 102, 102, 102, 60, 24, 0,
    0, 0, 99, 107, 127, 62, 54, 0,
    0, 0, 102, 60, 24, 60, 102, 0,
    0, 0, 102, 102, 102, 62, 12, 120,
    0, 0, 126, 12, 24, 48, 126, 0,
    60, 48, 48, 48, 48, 48, 60, 0,
    12, 18, 48, 124, 48, 98, 252, 0,
    60, 12, 12, 12, 12, 12, 60, 0,
    0, 24, 60, 126, 24, 24, 24, 24,
    0, 16, 48, 127, 127, 48, 16, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    24, 24, 24, 24, 0, 0, 24, 0,
    102, 102, 102, 0, 0, 0, 0, 0,
    102, 102, 255, 102, 255, 102, 102, 0,
    24, 62, 96, 60, 6, 124, 24, 0,
    98, 102, 12, 24, 48, 102, 70, 0,
    60, 102, 60, 56, 103, 102, 63, 0,
    6, 12, 24, 0, 0, 0, 0, 0,
    12, 24, 48, 48, 48, 24, 12, 0,
    48, 24, 12, 12, 12, 24, 48, 0,
    0, 102, 60, 255, 60, 102, 0, 0,
    0, 24, 24, 126, 24, 24, 0, 0,
    0, 0, 0, 0, 0, 24, 24, 48,
    0, 0, 0, 126, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 24, 24, 0,
    0, 3, 6, 12, 24, 48, 96, 0,
    60, 102, 110, 118, 102, 102, 60, 0,
    24, 24, 56, 24, 24, 24, 126, 0,
    60, 102, 6, 12, 48, 96, 126, 0,
    60, 102, 6, 28, 6, 102, 60, 0,
    6, 14, 30, 102, 127, 6, 6, 0,
    126, 96, 124, 6, 6, 102, 60, 0,
    60, 102, 96, 124, 102, 102, 60, 0,
    126, 102, 12, 24, 24, 24, 24, 0,
    60, 102, 102, 60, 102, 102, 60, 0,
    60, 102, 102, 62, 6, 102, 60, 0,
    0, 0, 24, 0, 0, 24, 0, 0,
    0, 0, 24, 0, 0, 24, 24, 48,
    14, 24, 48, 96, 48, 24, 14, 0,
    0, 0, 126, 0, 126, 0, 0, 0,
    112, 24, 12, 6, 12, 24, 112, 0,
    60, 102, 6, 12, 24, 0, 24, 0,
    0, 0, 0, 255, 255, 0, 0, 0,
    24, 60, 102, 126, 102, 102, 102, 0,
    124, 102, 102, 124, 102, 102, 124, 0,
    60, 102, 96, 96, 96, 102, 60, 0,
    120, 108, 102, 102, 102, 108, 120, 0,
    126, 96, 96, 120, 96, 96, 126, 0,
    126, 96, 96, 120, 96, 96, 96, 0,
    60, 102, 96, 110, 102, 102, 60, 0,
    102, 102, 102, 126, 102, 102, 102, 0,
    60, 24, 24, 24, 24, 24, 60, 0,
    30, 12, 12, 12, 12, 108, 56, 0,
    102, 108, 120, 112, 120, 108, 102, 0,
    96, 96, 96, 96, 96, 96, 126, 0,
    99, 119, 127, 107, 99, 99, 99, 0,
    102, 118, 126, 126, 110, 102, 102, 0,
    60, 102, 102, 102, 102, 102, 60, 0,
    124, 102, 102, 124, 96, 96, 96, 0,
    60, 102, 102, 102, 102, 60, 14, 0,
    124, 102, 102, 124, 120, 108, 102, 0,
    60, 102, 96, 60, 6, 102, 60, 0,
    126, 24, 24, 24, 24, 24, 24, 0,
    102, 102, 102, 102, 102, 102, 60, 0,
    102, 102, 102, 102, 102, 60, 24, 0,
    99, 99, 99, 107, 127, 119, 99, 0,
    102, 102, 60, 24, 60, 102, 102, 0,
    102, 102, 102, 60, 24, 24, 24, 0,
    126, 6, 12, 24, 48, 96, 126, 0,
    24, 24, 24, 255, 255, 24, 24, 24,
    192, 192, 48, 48, 192, 192, 48, 48,
    24, 24, 24, 24, 24, 24, 24, 24,
    51, 51, 204, 204, 51, 51, 204, 204,
    51, 153, 204, 102, 51, 153, 204, 102,
    0, 0, 0, 0, 0, 0, 0, 0,
    240, 240, 240, 240, 240, 240, 240, 240,
    0, 0, 0, 0, 255, 255, 255, 255,
    255, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 255,
    192, 192, 192, 192, 192, 192, 192, 192,
    204, 204, 51, 51, 204, 204, 51, 51,
    3, 3, 3, 3, 3, 3, 3, 3,
    0, 0, 0, 0, 204, 204, 51, 51,
    204, 153, 51, 102, 204, 153, 51, 102,
    3, 3, 3, 3, 3, 3, 3, 3,
    24, 24, 24, 31, 31, 24, 24, 24,
    0, 0, 0, 0, 15, 15, 15, 15,
    24, 24, 24, 31, 31, 0, 0, 0,
    0, 0, 0, 248, 248, 24, 24, 24,
    0, 0, 0, 0, 0, 0, 255, 255,
    0, 0, 0, 31, 31, 24, 24, 24,
    24, 24, 24, 255, 255, 0, 0, 0,
    0, 0, 0, 255, 255, 24, 24, 24,
    24, 24, 24, 248, 248, 24, 24, 24,
    192, 192, 192, 192, 192, 192, 192, 192,
    224, 224, 224, 224, 224, 224, 224, 224,
    7, 7, 7, 7, 7, 7, 7, 7,
    255, 255, 0, 0, 0, 0, 0, 0,
    255, 255, 255, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 255, 255, 255,
    1, 3, 6, 108, 120, 112, 96, 0,
    0, 0, 0, 0, 240, 240, 240, 240,
    15, 15, 15, 15, 0, 0, 0, 0,
    24, 24, 24, 248, 248, 0, 0, 0,
    240, 240, 240, 240, 0, 0, 0, 0,
    240, 240, 240, 240, 15, 15, 15, 15,
    195, 153, 145, 145, 159, 153, 195, 255,
    255, 255, 195, 249, 193, 153, 193, 255,
    255, 159, 159, 131, 153, 153, 131, 255,
    255, 255, 195, 159, 159, 159, 195, 255,
    255, 249, 249, 193, 153, 153, 193, 255,
    255, 255, 195, 153, 129, 159, 195, 255,
    255, 241, 231, 193, 231, 231, 231, 255,
    255, 255, 193, 153, 153, 193, 249, 131,
    255, 159, 159, 131, 153, 153, 153, 255,
    255, 231, 255, 199, 231, 231, 195, 255,
    255, 249, 255, 249, 249, 249, 249, 195,
    255, 159, 159, 147, 135, 147, 153, 255,
    255, 199, 231, 231, 231, 231, 195, 255,
    255, 255, 153, 128, 128, 148, 156, 255,
    255, 255, 131, 153, 153, 153, 153, 255,
    255, 255, 195, 153, 153, 153, 195, 255,
    255, 255, 131, 153, 153, 131, 159, 159,
    255, 255, 193, 153, 153, 193, 249, 249,
    255, 255, 131, 153, 159, 159, 159, 255,
    255, 255, 193, 159, 195, 249, 131, 255,
    255, 231, 129, 231, 231, 231, 241, 255,
    255, 255, 153, 153, 153, 153, 193, 255,
    255, 255, 153, 153, 153, 195, 231, 255,
    255, 255, 156, 148, 128, 193, 201, 255,
    255, 255, 153, 195, 231, 195, 153, 255,
    255, 255, 153, 153, 153, 193, 243, 135,
    255, 255, 129, 243, 231, 207, 129, 255,
    195, 207, 207, 207, 207, 207, 195, 255,
    243, 237, 207, 131, 207, 157, 3, 255,
    195, 243, 243, 243, 243, 243, 195, 255,
    255, 231, 195, 129, 231, 231, 231, 231,
    255, 239, 207, 128, 128, 207, 239, 255,
    255, 255, 255, 255, 255, 255, 255, 255,
    231, 231, 231, 231, 255, 255, 231, 255,
    153, 153, 153, 255, 255, 255, 255, 255,
    153, 153, 0, 153, 0, 153, 153, 255,
    231, 193, 159, 195, 249, 131, 231, 255,
    157, 153, 243, 231, 207, 153, 185, 255,
    195, 153, 195, 199, 152, 153, 192, 255,
    249, 243, 231, 255, 255, 255, 255, 255,
    243, 231, 207, 207, 207, 231, 243, 255,
    207, 231, 243, 243, 243, 231, 207, 255,
    255, 153, 195, 0, 195, 153, 255, 255,
    255, 231, 231, 129, 231, 231, 255, 255,
    255, 255, 255, 255, 255, 231, 231, 207,
    255, 255, 255, 129, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 231, 231, 255,
    255, 252, 249, 243, 231, 207, 159, 255,
    195, 153, 145, 137, 153, 153, 195, 255,
    231, 231, 199, 231, 231, 231, 129, 255,
    195, 153, 249, 243, 207, 159, 129, 255,
    195, 153, 249, 227, 249, 153, 195, 255,
    249, 241, 225, 153, 128, 249, 249, 255,
    129, 159, 131, 249, 249, 153, 195, 255,
    195, 153, 159, 131, 153, 153, 195, 255,
    129, 153, 243, 231, 231, 231, 231, 255,
    195, 153, 153, 195, 153, 153, 195, 255,
    195, 153, 153, 193, 249, 153, 195, 255,
    255, 255, 231, 255, 255, 231, 255, 255,
    255, 255, 231, 255, 255, 231, 231, 207,
    241, 231, 207, 159, 207, 231, 241, 255,
    255, 255, 129, 255, 129, 255, 255, 255,
    143, 231, 243, 249, 243, 231, 143, 255,
    195, 153, 249, 243, 231, 255, 231, 255,
    255, 255, 255, 0, 0, 255, 255, 255,
    231, 195, 153, 129, 153, 153, 153, 255,
    131, 153, 153, 131, 153, 153, 131, 255,
    195, 153, 159, 159, 159, 153, 195, 255,
    135, 147, 153, 153, 153, 147, 135, 255,
    129, 159, 159, 135, 159, 159, 129, 255,
    129, 159, 159, 135, 159, 159, 159, 255,
    195, 153, 159, 145, 153, 153, 195, 255,
    153, 153, 153, 129, 153, 153, 153, 255,
    195, 231, 231, 231, 231, 231, 195, 255,
    225, 243, 243, 243, 243, 147, 199, 255,
    153, 147, 135, 143, 135, 147, 153, 255,
    159, 159, 159, 159, 159, 159, 129, 255,
    156, 136, 128, 148, 156, 156, 156, 255,
    153, 137, 129, 129, 145, 153, 153, 255,
    195, 153, 153, 153, 153, 153, 195, 255,
    131, 153, 153, 131, 159, 159, 159, 255,
    195, 153, 153, 153, 153, 195, 241, 255,
    131, 153, 153, 131, 135, 147, 153, 255,
    195, 153, 159, 195, 249, 153, 195, 255,
    129, 231, 231, 231, 231, 231, 231, 255,
    153, 153, 153, 153, 153, 153, 195, 255,
    153, 153, 153, 153, 153, 195, 231, 255,
    156, 156, 156, 148, 128, 136, 156, 255,
    153, 153, 195, 231, 195, 153, 153, 255,
    153, 153, 153, 195, 231, 231, 231, 255,
    129, 249, 243, 231, 207, 159, 129, 255,
    231, 231, 231, 0, 0, 231, 231, 231,
    63, 63, 207, 207, 63, 63, 207, 207,
    231, 231, 231, 231, 231, 231, 231, 231,
    204, 204, 51, 51, 204, 204, 51, 51,
    204, 102, 51, 153, 204, 102, 51, 153,
    255, 255, 255, 255, 255, 255, 255, 255,
    15, 15, 15, 15, 15, 15, 15, 15,
    255, 255, 255, 255, 0, 0, 0, 0,
    0, 255, 255, 255, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 255, 255, 0,
    63, 63, 63, 63, 63, 63, 63, 63,
    51, 51, 204, 204, 51, 51, 204, 204,
    252, 252, 252, 252, 252, 252, 252, 252,
    255, 255, 255, 255, 51, 51, 204, 204,
    51, 102, 204, 153, 51, 102, 204, 153,
    252, 252, 252, 252, 252, 252, 252, 252,
    231, 231, 231, 224, 224, 231, 231, 231,
    255, 255, 255, 255, 240, 240, 240, 240,
    231, 231, 231, 224, 224, 255, 255, 255,
    255, 255, 255, 7, 7, 231, 231, 231,
    255, 255, 255, 255, 255, 255, 0, 0,
    255, 255, 255, 224, 224, 231, 231, 231,
    231, 231, 231, 0, 0, 255, 255, 255,
    255, 255, 255, 0, 0, 231, 231, 231,
    231, 231, 231, 7, 7, 231, 231, 231,
    63, 63, 63, 63, 63, 63, 63, 63,
    31, 31, 31, 31, 31, 31, 31, 31,
    248, 248, 248, 248, 248, 248, 248, 248,
    0, 0, 255, 255, 255, 255, 255, 255,
    0, 0, 0, 255, 255, 255, 255, 255,
    255, 255, 255, 255, 255, 0, 0, 0,
    254, 252, 249, 147, 135, 143, 159, 255,
    255, 255, 255, 255, 15, 15, 15, 15,
    240, 240, 240, 240, 255, 255, 255, 255,
    231, 231, 231, 7, 7, 255, 255, 255,
    15, 15, 15, 15, 255, 255, 255, 255,
    15, 15, 15, 15, 240, 240, 240, 240};

void char_write_binary(uint8_t byte, uint16_t *result, Color color)
{
    uint8_t tmp = byte;
    for (int i = 0; i < 8; i++)
    {
        if (tmp % 2 == 0)
        {
            result[7 - i] = 0;
        }
        else
        {
            result[7 - i] = rgb_to_16(color.r, color.g, color.b);
        }
        tmp = tmp >> 1;
    }
}

uint16_t char_ascii_offset(char c)
{
    uint16_t result = 0;
    if (c > 31 && c < 64)
    {
        result = c * CHAR_HEIGHT;
    }
    else if (c > 63 && c < 97)
    {
        result = (c - 64) * CHAR_HEIGHT;
    }
    else if (c > 96 && c < 128)
    {
        result = 2056 + (c - 97) * CHAR_HEIGHT;
    }
    else if (c > 127 && c < 256)
    {
        result = 512 + (c - 128) * CHAR_HEIGHT;
    }
    return result;
}

void char_build_matrix(char c, uint16_t *results, Color color)
{
    uint16_t offset = char_ascii_offset(c);
    uint16_t size = CHAR_HEIGHT * CHAR_WIDTH;
    uint8_t tmp = 0;
    for (int i = 0; i < (size / 8); i++)
    {
        tmp = char_characters[offset + i];
        char_write_binary(tmp, results + (i * CHAR_WIDTH), color);
    }
}

void draw_char(char c, uint16_t x, uint16_t y, Color color)
{
    uint16_t matrix[CHAR_HEIGHT * CHAR_WIDTH];
    switch (c)
    {
    case '\n':
    case '\0':
        c = ' ';
    }
    char_build_matrix(c, matrix, color);
    fill_area_data(x, y, CHAR_WIDTH, CHAR_HEIGHT, matrix);
}

void draw_string(char *string, uint16_t x, uint16_t y, Color color)
{
    int i = 0;
    while (string[i] != '\0')
    {
        draw_char(string[i], i * 8, y, color);
        i++;
    }
}

void scrollUp()
{
    for (int y = 0; y < ROWS - 1; y++)
    {
        for (int x = 0; x < COLUMNS; x++)
        {
            SCREEN[y][x] = SCREEN[y + 1][x];
        }
    }
    for (int x = 0; x < COLUMNS; x++)
    {
        SCREEN[ROWS - 1][x] = '\0';
    }
}

void display_cursor()
{
    if (cursorX == COLUMNS)
    {
        cursorY++;
        if (cursorY == ROWS)
        {
            scrollUp();
            refresh_screen();
            cursorY--;
        }
        cursorX = 0;
    }
    draw_char('_', cursorX * CHAR_WIDTH, cursorY * CHAR_HEIGHT, YELLOW);
}

void print_text(char *string, Color color)
{
    printf("CursorX: %d CursorY: %d ", cursorX, cursorY);
    int i = 0;
    int tmpCursorX = 0;
    int tmpCursorY = 0;
    char tmpChar = '\0';
    while (string[i] != '\0')
    {
        tmpChar = string[i];
        if (tmpChar == '\n')
        {
            SCREEN[cursorY][cursorX] = tmpChar;
            draw_char(SCREEN[cursorY][cursorX], cursorX * CHAR_WIDTH, cursorY * CHAR_HEIGHT, color);
            cursorX++;
            for (int i = cursorX; i < COLUMNS; i++)
            {
                SCREEN[cursorY][i] = '\0';
                draw_char(SCREEN[cursorY][i], i * CHAR_WIDTH, cursorY * CHAR_HEIGHT, color);
            }
            cursorX = COLUMNS;
        }
        else if (SCREEN[cursorY][cursorX] != tmpChar)
        {
            SCREEN[cursorY][cursorX] = string[i];
            draw_char(string[i], cursorX * CHAR_WIDTH, cursorY * CHAR_HEIGHT, color);
            cursorX++;
        }
        i++;
        display_cursor();
    }
}

void print_char(char c, Color color)
{
    char string[] = {c, '\0'};
    print_text(string, color);
}

void refresh_screen()
{
    for (int y = 0; y < ROWS; y++)
    {
        for (int x = 0; x < COLUMNS; x++)
        {
            if (SCREEN[y][x] == '\0')
            {
                draw_char(' ', x * CHAR_WIDTH, y * CHAR_HEIGHT, YELLOW);
            }
            else
            {
                draw_char(SCREEN[y][x], x * CHAR_WIDTH, y * CHAR_HEIGHT, YELLOW);
            }
        }
    }
}